<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cowrie SSH Monitor</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>üêç Cowrie SSH Traffic</h1>
    <div id="log" class="log-box"></div>

    <script>
        const log = document.getElementById("log");
        let isAtBottom = true;

        function scrollToBottom() {
            log.scrollTop = log.scrollHeight;
        }

        log.addEventListener('scroll', () => {
            const threshold = 50; // pixels from bottom
            isAtBottom = log.scrollHeight - log.scrollTop - log.clientHeight < threshold;
        });

        const eventSource = new EventSource("/stream");
        eventSource.onmessage = function (event) {
            const div = document.createElement("div");
            div.textContent = event.data;
            log.appendChild(div);
            if (isAtBottom) scrollToBottom();
        };
    </script>
</body>
</html>
